<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>クイズゲーム</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
</head>
<body>

<script>
let imagesLevel1 = []; // レベル1の画像を格納する配列
let imagesLevel2 = []; // レベル2の画像を格納する配列
let imagesLevel3 = []; // レベル3の画像を格納する配列
let correctAnswersLevel1 = ["potato", "carrot", "apple", "tomato", "orange","peach","melon","corn","onion","banana"];
let correctAnswersLevel2 = ["cherry", "sausage", "pineapple", "grapes", "strawberry", "mushroom", "cabbage"];
let correctAnswersLevel3 = ["persimmon", "spinach", "eggplant", "water melon", "japanese pear", "cucumber", "green pepper", "kiwi fruit"];
let currentQuestion = 0;
let input, userAnswer = "", message1 = "この食べ物は何でしょう?", message2 = "What is this food?";
let resultMessage = "", isFinished = false, startTime, timerLevel1 = 0, timerLevel2 = 0, timerLevel3 = 0;
let isStarted = false, isLevel2 = false, isLevel3 = false;
let startLevel1Button, startLevel2Button, startLevel3Button, checkButton, replayButton;

function preload() {
  imagesLevel1[0] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/a.png');
  imagesLevel1[1] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/b.jpg');
  imagesLevel1[2] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/c.jpg');
  imagesLevel1[3] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/d.png');
  imagesLevel1[4] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/e.jpg');
  imagesLevel1[5] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/f.png');
  imagesLevel1[6] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/g.png');
  imagesLevel1[7] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/h.jpg');
  imagesLevel1[8] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/i.jpg');
  imagesLevel1[9] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/j.jpg');
  
  imagesLevel2[0] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/k.jpg');
  imagesLevel2[1] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/l.jpg');
  imagesLevel2[2] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/m1.png');
  imagesLevel2[3] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/m.jpg');
  imagesLevel2[4] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/n.jpg');
  imagesLevel2[5] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/o.jpg');
  imagesLevel2[6] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/p.jpg');

  imagesLevel3[0] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/q.jpg');
  imagesLevel3[1] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/r.png');
  imagesLevel3[2] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/s.jpg');
  imagesLevel3[3] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/t.jpg');
  imagesLevel3[4] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/u.jpg');
  imagesLevel3[5] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/v.jpg');
  imagesLevel3[6] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/w.jpg');
  imagesLevel3[7] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/x.jpg');
}

function setup() {
  createCanvas(windowWidth, windowHeight);
  startLevel1Button = createButton('Start 初級');
  startLevel1Button.position(width / 2 - 150, height / 2 - 150).style('font-size', '32px').style('padding', '20px 40px').style('background-color', '#28a745').style('color', '#ffffff').style('border-radius', '10px').mousePressed(() => startQuiz(1));
  startLevel2Button = createButton('Start 中級');
  startLevel2Button.position(width / 2 - 150, height / 2 - 50).style('font-size', '32px').style('padding', '20px 40px').style('background-color', '#007bff').style('color', '#ffffff').style('border-radius', '10px').mousePressed(() => startQuiz(2));
  startLevel3Button = createButton('Start 上級');
  startLevel3Button.position(width / 2 - 150, height / 2 + 50).style('font-size', '32px').style('padding', '20px 40px').style('background-color', '#ff5733').style('color', '#ffffff').style('border-radius', '10px').mousePressed(() => startQuiz(3));
  
  input = createInput().position(width / 2 - 250, height - 205).size(500, 56).style('font-size', '40px').hide();
  checkButton = createButton('Check Answer').position(input.x + input.width + 10, height - 205).size(150, 64).style('font-size', '25px').mousePressed(checkAnswer).hide();
  replayButton = createButton('もう一度プレイ').position(width / 2 - 100, height / 2 + 100).style('font-size', '28px').style('padding', '10px 20px').style('background-color', '#ffc107').style('color', '#ffffff').style('border-radius', '10px').mousePressed(resetQuiz).hide();
}

function draw() {
  background(255);
  if (isStarted && !isFinished) {
    let timer = isLevel3 ? timerLevel3 : isLevel2 ? timerLevel2 : timerLevel1;
    timer = floor((millis() - startTime) / 1000);
    textSize(36); fill(0); textAlign(CENTER); text("Timer: " + timer + "s", width / 2, 50);
  }
  if (isFinished) {
    textSize(64); fill(0); textAlign(CENTER, CENTER); text("Finish", width / 2, height / 2); textSize(36);
    text(`${isLevel3 ? "上級" : isLevel2 ? "中級" : "初級"} タイム: ${isLevel3 ? timerLevel3 : isLevel2 ? timerLevel2 : timerLevel1} 秒`, width / 2, height / 2 + 80);
    replayButton.show();
  } else if (isStarted) {
    let currentImages = isLevel3 ? imagesLevel3 : isLevel2 ? imagesLevel2 : imagesLevel1;
    if (currentImages[currentQuestion]) {
      image(currentImages[currentQuestion], width / 2 - 95, height / 2 - 125, 170, 195);
    }
    textSize(36); fill(0); textAlign(CENTER); text(message1, width / 2, 120); textSize(28); text(message2, width / 2, 160);
    textSize(32); fill(0); textAlign(CENTER); text(resultMessage, width / 2, height - 75);
  }
}

function checkAnswer() {
  userAnswer = input.value().toLowerCase(); 
  let correctAnswers = isLevel3 ? correctAnswersLevel3 : isLevel2 ? correctAnswersLevel2 : correctAnswersLevel1;
  if (userAnswer === correctAnswers[currentQuestion]) {
    resultMessage = "正解！やったね！";
    currentQuestion++;
    input.value('');
    if ((isLevel3 && currentQuestion >= correctAnswersLevel3.length) || (isLevel2 && currentQuestion >= correctAnswersLevel2.length) || (!isLevel2 && !isLevel3 && currentQuestion >= correctAnswersLevel1.length)) {
      isFinished = true;
    }
  } else {
    resultMessage = "不正解です！もう一度考えましょう！";
  }
}

function startQuiz(level) {
  if (level === 1) {
    isLevel2 = false; isLevel3 = false;
  } else if (level === 2) {
    isLevel2 = true; isLevel3 = false;
  } else {
    isLevel2 = false; isLevel3 = true;
  }
  input.show(); checkButton.show(); startTime = millis(); isStarted = true;
}

function resetQuiz() {
  location.reload();
}
</script>

</body>
</html>
