<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Food Typing Quiz</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
        canvas {
            display: block;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
</head>
<body>

<script>
let imagesLevel1 = []; 
let imagesLevel2 = []; 
let imagesLevel3 = []; 
let correctAnswersLevel1 = ["potato", "carrot", "apple", "tomato", "orange", "peach", "melon", "corn", "onion", "banana"];
let correctAnswersLevel2 = ["cherry", "sausage", "pineapple", "grapes", "strawberry", "mushroom", "cabbage"];
let correctAnswersLevel3 = ["persimmon", "spinach", "eggplant", "water melon", "japanese pear", "cucumber", "green pepper", "kiwi fruit"];
let currentQuestion = 0;
let input;
let userAnswer = "";
let message1 = "この食べ物は何でしょう?";
let message2 = "What is this food?";
let resultMessage = "";
let isFinished = false;
let startTime;
let timerLevel1 = 0;
let timerLevel2 = 0;
let timerLevel3 = 0;
let isStarted = false;
let isLevel2 = false;
let isLevel3 = false;
let startLevel1Button;
let startLevel2Button;
let startLevel3Button;
let checkButton;
let replayButton;

function preload() {
  imagesLevel1[0] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/a.png');
  imagesLevel1[1] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/b.jpg');
  imagesLevel1[2] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/c.jpg');
  imagesLevel1[3] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/d.png');
  imagesLevel1[4] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/e.jpg');
  imagesLevel1[5] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/f.png');
  imagesLevel1[6] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/g.png');
  imagesLevel1[7] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/h.jpg');
  imagesLevel1[8] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/i.jpg');
  imagesLevel1[9] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/j.jpg');

  imagesLevel2[0] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/k.jpg');
  imagesLevel2[1] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/l.jpg');
  imagesLevel2[2] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/m1.png');
  imagesLevel2[3] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/m.jpg');
  imagesLevel2[4] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/n.jpg');
  imagesLevel2[5] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/o.jpg');
  imagesLevel2[6] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/p.jpg');

  imagesLevel3[0] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/q.jpg');
  imagesLevel3[1] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/r.png');
  imagesLevel3[2] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/s.jpg');
  imagesLevel3[3] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/t.jpg');
  imagesLevel3[4] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/u.jpg');
  imagesLevel3[5] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/v.jpg');
  imagesLevel3[6] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/w.jpg');
  imagesLevel3[7] = loadImage('https://raw.githubusercontent.com/Terapittan1241/typing/main/x.jpg');
}

function setup() {
  createCanvas(windowWidth, windowHeight);

  startLevel1Button = createButton('Start 初級');
  startLevel1Button.position(width / 2 - 150, height / 2 - 150);
  startLevel1Button.style('font-size', '32px');
  startLevel1Button.style('padding', '20px 40px');
  startLevel1Button.style('background-color', '#28a745');
  startLevel1Button.style('color', '#ffffff');
  startLevel1Button.style('border', 'none');
  startLevel1Button.style('border-radius', '10px');
  startLevel1Button.mousePressed(() => startQuiz(1));

  startLevel2Button = createButton('Start 中級');
  startLevel2Button.position(width / 2 - 150, height / 2 - 50);
  startLevel2Button.style('font-size', '32px');
  startLevel2Button.style('padding', '20px 40px');
  startLevel2Button.style('background-color', '#007bff');
  startLevel2Button.style('color', '#ffffff');
  startLevel2Button.style('border', 'none');
  startLevel2Button.style('border-radius', '10px');
  startLevel2Button.mousePressed(() => startQuiz(2));

  startLevel3Button = createButton('Start 上級');
  startLevel3Button.position(width / 2 - 150, height / 2 + 50);
  startLevel3Button.style('font-size', '32px');
  startLevel3Button.style('padding', '20px 40px');
  startLevel3Button.style('background-color', '#ff5733');
  startLevel3Button.style('color', '#ffffff');
  startLevel3Button.style('border', 'none');
  startLevel3Button.style('border-radius', '10px');
  startLevel3Button.mousePressed(() => startQuiz(3));

  input = createInput();
  input.position(width / 2 - 250, height - 205);
  input.size(500, 56);
  input.style('font-size', '40px');
  input.hide();

  checkButton = createButton('Check Answer');
  checkButton.position(input.x + input.width + 10, height - 205);
  checkButton.size(150, 64);
  checkButton.style('font-size', '25px');
  checkButton.mousePressed(checkAnswer);
  checkButton.hide();

  replayButton = createButton('もう一度プレイ');
  replayButton.position(width / 2 - 100, height / 2 + 100);
  replayButton.style('font-size', '28px');
  replayButton.style('padding', '10px 20px');
  replayButton.style('background-color', '#ffc107');
  replayButton.style('color', '#ffffff');
  replayButton.style('border', 'none');
  replayButton.style('border-radius', '10px');
  replayButton.mousePressed(resetQuiz);
  replayButton.hide();
}

function draw() {
  background(255);

  if (isStarted && !isLevel2 && !isLevel3 && !isFinished) {
    timerLevel1 = floor((millis() - startTime) / 1000);
    textSize(36);
    fill(0);
    textAlign(CENTER);
    text("Timer: " + timerLevel1 + "s", width / 2, 50);
  }

  if (isStarted && isLevel2 && !isLevel3 && !isFinished) {
    timerLevel2 = floor((millis() - startTime) / 1000);
    textSize(36);
    fill(0);
    textAlign(CENTER);
    text("Timer: " + timerLevel2 + "s", width / 2, 50);
  }

  if (isStarted && isLevel3 && !isFinished) {
    timerLevel3 = floor((millis() - startTime) / 1000);
    textSize(36);
    fill(0);
    textAlign(CENTER);
    text("Timer: " + timerLevel3 + "s", width / 2, 50);
  }

  if (isFinished) {
    textSize(64);
    fill(0);
    textAlign(CENTER);
    text(resultMessage, width / 2, height / 2 - 50);
    replayButton.show();
  }
}

function checkAnswer() {
  userAnswer = input.value().toLowerCase().trim();
  let correctAnswer;
  let images;

  if (!isLevel2 && !isLevel3) {
    correctAnswer = correctAnswersLevel1[currentQuestion];
    images = imagesLevel1;
  } else if (isLevel2 && !isLevel3) {
    correctAnswer = correctAnswersLevel2[currentQuestion];
    images = imagesLevel2;
  } else {
    correctAnswer = correctAnswersLevel3[currentQuestion];
    images = imagesLevel3;
  }

  if (userAnswer === correctAnswer) {
    currentQuestion++;
    input.value('');

    if (currentQuestion < images.length) {
      image(images[currentQuestion], width / 2 - 250, height / 2 - 150, 500, 300);
    } else {
      isFinished = true;
      resultMessage = "お疲れさまでした!";
      replayButton.show();
      input.hide();
      checkButton.hide();
    }
  } else {
    alert('答えが違います。もう一度試してください。');
  }
}

function startQuiz(level) {
  if (level === 1) {
    isStarted = true;
  } else if (level === 2) {
    isStarted = true;
    isLevel2 = true;
  } else if (level === 3) {
    isStarted = true;
    isLevel3 = true;
  }
  startTime = millis();
  input.show();
  checkButton.show();
  startLevel1Button.hide();
  startLevel2Button.hide();
  startLevel3Button.hide();
}

function resetQuiz() {
  isStarted = false;
  isFinished = false;
  isLevel2 = false;
  isLevel3 = false;
  currentQuestion = 0;
  timerLevel1 = 0;
  timerLevel2 = 0;
  timerLevel3 = 0;
  input.value('');
  replayButton.hide();
  input.hide();
  checkButton.hide();
  startLevel1Button.show();
  startLevel2Button.show();
  startLevel3Button.show();
}

function windowResized() {
  resizeCanvas(windowWidth, windowHeight);
}
</script>

</body>
</html>
